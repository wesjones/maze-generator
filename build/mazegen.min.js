/*!
* maze-generator v.0.1.4
* (c) 2016, Obogo
* License: MIT.
*/


!function(a,b){b.mazegen=a;var c,d,e=function(){};return function(){var a,b,f,g,h,i="~",j=".";return a=Function[i]=Function[i]||function(b){return a[b]||(a[b]={}),a[b]},g=a("c"),b=a("d"),f=a("p"),h=function(a){var c=arguments,d=c[1];"function"==typeof d?b[a]=d():(g[a]=c[2],g[a][j]=d)},c=d=function(){h.apply(null,arguments)},resolve=function(a,c){f[a]=!0;var d,e,h,i=c[j],k=[];if(i)for(e=i.length,d=0;e>d;d++)h=i[d],g[h]&&(f.hasOwnProperty(h)||resolve(h,g[h]),resolve(h,g[h]),delete g[h]);if(!b.hasOwnProperty(a)){for(d=0;e>d;d++)h=i[d],k.push(b.hasOwnProperty(h)&&b[h]);b[a]=c.apply(null,k)}delete f[a]},e=function(){for(var a in g)resolve(a,g[a])},c}(),c("mazegen",["findPath","angleToDirection","getAngle","getPointsFromEdge","getSidePoints"],function(b,c,d,e,f){function g(){function c(a,b){return Math.floor(Math.random()*a+(b||0))}function d(a,b){b=b||this;for(var c=0;c<b.rows;c+=1)for(var d=0;d<b.cols;d+=1)a.call(b,c,d,b);return b}function g(a,b,c){var d=a%2===0&&b%2===0?1:0;c[a]=c[a]||[],c[a][b]=d,d&&c.available.push({y:a,x:b})}function h(a){return a.getPointsFromEdge(0,[a.types.PATH],1)[0]}function i(a,b,c,d,e){function g(){if(a.length){var e=a.shift();j.starts.push(e),j[e.y][e.x]=s.START,j[b.y][b.x]=s.END,j.findPath(e,b,c,i)}else d()}function h(a,b){for(var c,d=f(a),e=0;e<d.length;e+=1)d[e].dist=n(d[e].x,d[e].y,b.x,b.y),(!c||d[e].dist<c.dist)&&(c=d[e]);return c}function i(a){var d=a.closest;if(d.x===b.x&&d.y===b.y)e(),g();else{for(var f=h(d,b);j.getValue(f.y,f.x)===s.WALL;)j[f.y][f.x]=s.PREFERRED,f=h(f,b);j[f.y][f.x]=s.PREFERRED,e(),j.findPath(f,b,c,i)}}c=c||[s.WALL],e=e||function(){};var j=this;j.starts=j.starts||[],a instanceof Array||(a=[a]),b=j.getClosestAvailablePoint(b),g()}function j(a,b){return this[a]?this[a][b]:void 0}function k(a){var c=a||{},f=[];return f.rows=c.rows||10,f.cols=c.cols||10,f.available=[],f.types=s,d(g,f),f.findPath=function(a,c,d,e){b(f,a,c,d,e)},q(f),f.each=d.bind(f),f.asString=function(){return this.join("\n").split(",").join("")},f.forcePath=i.bind(f),f.getValue=j.bind(f),f.getPointsFromEdge=function(a,b,c){return e(f,a,b||[b.PATH,b.PREFERRED],c)},f.getClosestAvailablePoint=function(a){return r(f,a)},f.end=f.getClosestAvailablePoint(c&&c.end||h(f)),f}function l(a,b,c){return!(!a[b]||void 0===a[b][c])}function m(a,b){var c=b,d=[];return l(a,c.y-1,c.x)&&d.push({y:c.y-1,x:c.x,ty:c.y-2,tx:c.x}),l(a,c.y+1,c.x)&&d.push({y:c.y+1,x:c.x,ty:c.y+2,tx:c.x}),l(a,c.y,c.x-1)&&d.push({y:c.y,x:c.x-1,ty:c.y,tx:c.x-2}),l(a,c.y,c.x+1)&&d.push({y:c.y,x:c.x+1,ty:c.y,tx:c.x+2}),d}function n(a,b,c,d){return Math.sqrt((c-=a)*c+(d-=b)*d)}function o(a,b,c){a[b.y][b.x]=c}function p(a,b){for(var d=m(a,b),e=c(1.3,1),f=0;e>f;f+=1){var g=c(d.length);o(a,d[g],s.PATH),d.splice(g,1)}}function q(a){for(;a.available.length;){var b=c(a.available.length);p(a,a.available[b]),a.available.splice(b,1)}}function r(a,b){var c,d={y:Math.round(b.y),x:Math.round(b.x)};if(a.getValue(d.y,d.x))return d;for(var e=f(d),g=0;g<e.length;g+=1)if(a.getValue(e[g].y,e[g].x))return e[g];for(g=0;g<e.length;g+=1)if(c=r(a,e[g]))return c;return null}var s={WALL:0,PATH:1,PREFERRED:2,START:3,END:4};a.generate=k,a.types=s}return new g}),c("findPath",["getDistance","getSidePoints"],function(b,c){function d(a,d,e,f,g){function h(a,b){return a.y===b.y&&a.x===b.x}function i(){for(var b=[],c=0;c<a.length;c+=1){b[c]=[];for(var d=0;d<a[c].length;d+=1)b[c][d]=0}return b}function j(b){var c=a[b.y]&&a[b.y][b.x];return!(r[b.y]&&r[b.y][b.x]||void 0===c||-1!==f.indexOf(c))}function k(a){var b=[],d=c(a);return j(d.up)&&b.push(d.up),j(d.right)&&b.push(d.right),j(d.down)&&b.push(d.down),j(d.left)&&b.push(d.left),b}function l(a){r[a.y]=r[a.y]||[],r[a.y][a.x]=1}function m(){for(var a,b=q.slice(0),c=0;c<b.length;c+=1)if(!b[c].complete&&(a=n(b[c])))return a}function n(a){var b,c=k(a[a.length-1]),d=!1;q.splice(q.indexOf(a),1);for(var f=0;f<c.length;f+=1){var g=h(c[f],e);if(g&&(d=g),1===c.length){if(a.complete=g,a.push(c[f]),o(a),q.push(a),d)return a}else if(b=a.slice(0),b.complete=g,b.push(c[f]),o(b),q.push(b),d)return b;l(c[f])}return d}function o(a){for(var c={dist:b(a[0].x,a[0].y,e.x,e.y),pt:a[0]},d=1;d<a.length;d+=1){var f=b(a[d].x,a[d].y,e.x,e.y);f<c.dist&&(c.dist=f,c.pt=a[d])}return a.closest=c.pt,a.dist=c.dist,(!p||a.dist<p.dist)&&(p=a),a}var p,q=[[d]],r=i();if(j(d)&&j(e))var s=setInterval(function(){for(var a=Date.now();Date.now()===a;){var b=m();!b&&q.length||(clearInterval(s),g(p))}},1)}return a.findPath=d,d}),c("getDistance",function(){return function(a,b,c,d){return Math.sqrt((c-=a)*c+(d-=b)*d)}}),c("getSidePoints",["getPointToDirOfPoint"],function(a){return function(b){var c=[];return c.push(c.up=a(b,"up")),c.push(c.right=a(b,"right")),c.push(c.down=a(b,"down")),c.push(c.left=a(b,"left")),c}}),c("getPointToDirOfPoint",function(){var a={up:{x:0,y:-1},right:{x:1,y:0},down:{x:0,y:1},left:{x:-1,y:0}};return function(b,c){return{x:b.x+a[c].x,y:b.y+a[c].y}}}),c("angleToDirection",["radiansToDegrees"],function(a){var b=360;return function(c){var d=Math.abs(a(c));if(.125*b>=d||c>.875*b)return"right";if(.375*b>=d)return"up";if(.625*b>=d)return"left";if(.875*b>=d)return"down";throw new Error("Something went wrong")}}),c("radiansToDegrees",function(){return function(a){return a*(180/Math.PI)}}),c("getAngle",function(){return function(a,b,c,d){return Math.atan2(d-b,c-a)}}),c("getPointsFromEdge",function(){function a(a,b,c,d,e){for(var f=d;f<b[c].length-d;f+=1)-1!==e.indexOf(b.getValue(c,f))&&a.push({y:c,x:f})}function b(a,b,c,d,e){for(var f=d;f<b.length-d;f+=1)-1!==e.indexOf(b.getValue(f,c))&&a.push({y:f,x:c})}return function(c,d,e,f){d=d||0;var g,h=[];if(a(h,c,d,d,e),b(h,c,c[0].length-1-d,d,e),a(h,c,c.length-1-d,d,e),b(h,c,d,d,e),f){for(g=[];h.length&&g.length<f;){var i=Math.floor(Math.random()*h.length);g.push(h[i]),h.splice(i,1)}return g}return h}}),e(),b.mazegen}(this.mazegen||{},function(){return this}());
//# sourceMappingURL=mazegen.min.js.map