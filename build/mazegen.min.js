/*!
* maze-generator v.0.0.1
* (c) 2016, Obogo
* License: MIT.
*/


!function(a,b){b.mazegen=a;var c,d,e=function(){};return function(){var a,b,f,g,h,i="~",j=".";return a=Function[i]=Function[i]||function(b){return a[b]||(a[b]={}),a[b]},g=a("c"),b=a("d"),f=a("p"),h=function(a){var c=arguments,d=c[1];"function"==typeof d?b[a]=d():(g[a]=c[2],g[a][j]=d)},c=d=function(){h.apply(null,arguments)},resolve=function(a,c){f[a]=!0;var d,e,h,i=c[j],k=[];if(i)for(e=i.length,d=0;e>d;d++)h=i[d],g[h]&&(f.hasOwnProperty(h)||resolve(h,g[h]),resolve(h,g[h]),delete g[h]);if(!b.hasOwnProperty(a)){for(d=0;e>d;d++)h=i[d],k.push(b.hasOwnProperty(h)&&b[h]);b[a]=c.apply(null,k)}delete f[a]},e=function(){for(var a in g)resolve(a,g[a])},c}(),c("mazeGenerator",["dispatcher"],function(b){function c(a,c,h,i,j){function k(a,b){this.x=a,this.y=b}function l(){F=new k(Math.floor(.5*a),Math.floor(.5*c)),m(a,c,h,i,F.x,F.y)}function m(b,d,f,g,j,k){N.length=0,a=b,c=d,h=f,i=g,H=a*c/4,M=!1,J.length=0,t(),F.x=j,F.y=k,G=F.clone(),w(G.y,G.x,e),J=n(G.y,G.x),q()}function n(a,b){for(var c=s(a,b),d=c.length,e=[],f=0;d>f;f+=2){var g=c[f],h=c[f+1],i={source:g,dest:h,inBetween:new k(g.x-.5*(g.x-h.x),g.y-.5*(g.y-h.y))};e.push(i)}return e}function o(){clearTimeout(E)}function p(a){o(),E=setTimeout(q,a||i||500)}function q(b){if(J.length||b){var d=J.splice(Math.floor(Math.random()*J.length),1)[0];d.type=f,J=J.concat(n(G.y,G.x));var i=d.dest;if(!i||I[i.y][i.x]===f||I[i.y][i.x]===e)return void q();G.y===F.y&&G.x===F.x?w(G.y,G.x,e):I[G.y][G.x]===g&&w(G.y,G.x,f),w(d.inBetween.y,d.inBetween.x,f),w(i.y,i.x,g),0===Math.floor(Math.random()*j)&&r(),L+=1,G=i,N.push(d.inBetween),N.push(i),D.fire("render",I,y(),d.inBetween.clone(),i.clone()),J.length<a*c*h?p(10):(M||(M=!0,D.fire("ready",F.clone())),p(0))}else D.dispatch("complete")}function r(){var b=s(G.y,G.x,1),d=b[Math.floor(Math.random()*b.length)];d&&d.y&&d.x&&d.y<a-1&&d.x<c-1&&w(d.y,d.x,f)}function s(a,b,c){var d=[];return c=c||K,v(a,b-c)||(d.push(new k(b,a)),d.push(new k(b-c,a))),v(a-K,b)||(d.push(new k(b,a)),d.push(new k(b,a-c))),v(a,b+K)||(d.push(new k(b,a)),d.push(new k(b+c,a))),v(a+K,b)||(d.push(new k(b,a)),d.push(new k(b,a+c))),d}function t(){for(var b=0;a>b;b+=1){I[b]=[];for(var e=0;c>e;e+=1)I[b][e]=d}}function u(b,d){return 0>b||0>d||b>=a||d>=c}function v(a,b){return u(a,b)?!0:I[a][b]===f||I[a][b]===e}function w(a,b,c){u(a,b)||(I[a][b]=c)}function x(){return I}function y(){return L/H}function z(a,b){return I[b]&&I[b][a]}function A(a,b,c){var d=[];return z(a,b-1)===c&&d.push(new k(a,b-1)),z(a,b+1)===c&&d.push(new k(a,b+1)),z(a-1,b)===c&&d.push(new k(a-1,b)),z(a+1,b)===c&&d.push(new k(a+1,b)),d}function B(){return N}function C(){for(var a="",b=0;b<I.length;b+=1)a+=I[b].join(" ")+"\n";return a}var D=this;h=h||.1;var E,F,G,H,I=[],J=[],K=2,L=0,M=!1,N=[];return k.prototype.clone=function(){return new k(this.x,this.y)},D.getBoard=x,D.getPercent=y,D.getValue=z,D.setCell=w,D.getAvailablePoints=n,D.getValuesAroundPoint=A,D.stop=o,D.reset=m,D.getAllAvailablePoints=B,D.getBoardAsString=C,b(D),l(),D}var d=0,e=1,f=2,g=3;a.types={WALL:d,START:e,PATH:f,ACTIVE:g},a.create=function(a,b,d,e,f){return new c(a,b,d,e,f)}}),c("dispatcher",["apply","isFunction"],function(a,b){function c(a){this.type=a,this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1}function d(a){if(!a)throw Error("event cannot be undefined")}c.prototype.preventDefault=function(){this.defaultPrevented=!0},c.prototype.stopPropagation=function(){this.propagationStopped=!0},c.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=!0},c.prototype.toString=function(){return this.type};var e=function(e,f,g){function h(a,b){d(a);var c,e;e=o[a],e&&(b?(c=e.indexOf(b),-1!==c&&e.splice(c,1)):e.length=0)}function i(a,c){return b(c)?(d(a),o[a]=o[a]||[],o[a].push(c),function(){h(a,c)}):void 0}function j(c,g){function j(){h(c,j),a(g,f||e,arguments)}return b(g)?(d(c),i(c,j)):void 0}function k(a,b){d(a);var c,e="*";return a||b?(c=[],o[e]&&(c=o[e].concat(c)),o[a]&&(c=o[a].concat(c)),c):o}function l(){o={}}function m(b,c){return b&&a(b,e,c)}function n(a){d(a);var b,e=k(a,!0),f=e.length,a="object"==typeof a?a:new c(a);if(f)for(arguments[0]=a,b=0;f>b;b+=1)a.immediatePropagationStopped||m(e[b],arguments);return a}if(e&&e.on&&e.on.dispatcher)return e;e=e||{};var o={};return i.dispatcher=!0,f&&g?(e.on=f[g.on]&&f[g.on].bind(f),e.off=f[g.off]&&f[g.off].bind(f),e.once=f[g.once]&&f[g.once].bind(f),e.dispatch=e.fire=f[g.dispatch].bind(f)):(e.on=i,e.off=h,e.once=j,e.dispatch=e.fire=n),e.getListeners=k,e.removeAllListeners=l,e};return e}),c("apply",["isFunction"],function(a){return function(b,c,d){if(a(b)){switch(d=d||[],d.length){case 0:return b.call(c);case 1:return b.call(c,d[0]);case 2:return b.call(c,d[0],d[1]);case 3:return b.call(c,d[0],d[1],d[2]);case 4:return b.call(c,d[0],d[1],d[2],d[3]);case 5:return b.call(c,d[0],d[1],d[2],d[3],d[4]);case 6:return b.call(c,d[0],d[1],d[2],d[3],d[4],d[5])}return b.apply(c,d)}}}),c("isFunction",function(){var a=function(a){return"function"==typeof a};return a}),e(),b.mazegen}(this.mazegen||{},function(){return this}());
//# sourceMappingURL=mazegen.min.js.map