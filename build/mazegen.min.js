/*!
* maze-generator v.0.1.2
* (c) 2016, Obogo
* License: MIT.
*/


!function(a,b){b.mazegen=a;var c,d,e=function(){};return function(){var a,b,f,g,h,i="~",j=".";return a=Function[i]=Function[i]||function(b){return a[b]||(a[b]={}),a[b]},g=a("c"),b=a("d"),f=a("p"),h=function(a){var c=arguments,d=c[1];"function"==typeof d?b[a]=d():(g[a]=c[2],g[a][j]=d)},c=d=function(){h.apply(null,arguments)},resolve=function(a,c){f[a]=!0;var d,e,h,i=c[j],k=[];if(i)for(e=i.length,d=0;e>d;d++)h=i[d],g[h]&&(f.hasOwnProperty(h)||resolve(h,g[h]),resolve(h,g[h]),delete g[h]);if(!b.hasOwnProperty(a)){for(d=0;e>d;d++)h=i[d],k.push(b.hasOwnProperty(h)&&b[h]);b[a]=c.apply(null,k)}delete f[a]},e=function(){for(var a in g)resolve(a,g[a])},c}(),c("mazegen",function(){function b(){function b(a,b){return Math.floor(Math.random()*a+(b||0))}function c(a,b){b=b||this;for(var c=0;c<b.rows;c+=1)for(var d=0;d<b.cols;d+=1)a.call(b,c,d,b);return b}function d(a,b,c){var d=a%2===0&&b%2===0?1:0;c[a]=c[a]||[],c[a][b]=d,d&&c.available.push({y:a,x:b})}function e(a,b){for(var c,d,e,f=a.available.length,g=0;g<a.available.length;g+=1)d=a.available[g],c=j(d.x,d.y,b.x,b.y),f>c&&(f=c,e=d);return e}function f(a,c){for(var d,e=[],f=a.rows-1,g=a.cols-1,h=.5*Math.max(f,g),i=0;i<a.available.length;i+=1)d=a.available[i],0!==d.x&&0!==d.y&&d.x!==g&&d.y!==f||(c&&j(d.x,d.y,c.x,c.y)>h?e.push(d):c||e.push(d));return i=b(e.length),e[i]}function g(a){var b=a||{},g=[];return g.rows=b.rows||10,g.cols=b.cols||10,g.points=b.points||1,g.pointRange=b.pointRange||.1,g.available=[],g.types=q,c(d,g),g.start=e(g,b&&b.start||f(g)),g.end=e(g,b&&b.end||f(g,g.start)),m(g),g.each=c.bind(g),g.asString=function(){return this.join("\n").split(",").join("")},g}function h(a,b,c){return!(!a[b]||void 0===a[b][c])}function i(a,b){var c=b,d=[];return h(a,c.y-1,c.x)&&d.push({y:c.y-1,x:c.x,ty:c.y-2,tx:c.x}),h(a,c.y+1,c.x)&&d.push({y:c.y+1,x:c.x,ty:c.y+2,tx:c.x}),h(a,c.y,c.x-1)&&d.push({y:c.y,x:c.x-1,ty:c.y,tx:c.x-2}),h(a,c.y,c.x+1)&&d.push({y:c.y,x:c.x+1,ty:c.y,tx:c.x+2}),d}function j(a,b,c,d){return Math.sqrt((c-=a)*c+(d-=b)*d)}function k(a,b,c){a[b.y][b.x]=c}function l(a,c){for(var d=i(a,c),e=b(1.3,1),f=0;e>f;f+=1){var g=b(d.length);k(a,d[g],q.PATH),d.splice(g,1)}}function m(a){for(var c=a.available.length,d=a.points,e=[a.start];e.length<d;){var f=a.available[b(c)],g=e[e.length-1],h=j(f.x,f.y,g.x,g.y);h>.25*a.rows&&e.push(f)}for(e.push(a.end),console.log("path points",e.length),k(a,a.start,q.START),k(a,a.end,q.END),p(a,e,q.PREFERRED);a.available.length;){var i=b(a.available.length);l(a,a.available[i]),a.available.splice(i,1)}}function n(a,b){for(var c,d=0;d<a.available.length;d+=1)if(c=a.available[d],c.y===b.y&&c.x===b.x)return void a.available.splice(d,1)}function o(a,b){return a.dist-b.dist}function p(a,c,d){var e=c.shift();n(a,e);var f=c.shift();for(e.dist=j(e.x,e.y,f.x,f.y);f;)if(e.y!==f.y||e.x!==f.x){for(var g,h=i(a,e),l=[],m=0;m<h.length;m+=1)h[m].dist=j(h[m].tx,h[m].ty,f.x,f.y),h[m].dist<=e.dist&&a[h[m].y][h[m].x]!==q.PREFERRED&&l.push(h[m]);h.sort(o),g=l.length?l[b(l.length)]:h.shift(),a[e.y][e.x]===q.PATH&&k(a,e,d||q.PATH),k(a,g,d||q.PATH),e={y:g.ty,x:g.tx,dist:g.dist},n(a,e)}else f=c.shift()}var q={WALL:0,PATH:1,PREFERRED:2,START:3,END:4};a.generate=g,a.types=q}return new b}),c("findPath",function(){function b(a,b,c,d,e){function f(a,b){return a.y===b.y&&a.x===b.x}function g(){for(var b=[],c=0;c<a.length;c+=1){b[c]=[];for(var d=0;d<a[c].length;d+=1)b[c][d]=0}return b}function h(b){var c=a[b.y]&&a[b.y][b.x];return!(n[b.y]&&n[b.y][b.x]||void 0===c||-1!==d.indexOf(c))}function i(a){var b=[],c={y:a.y-1,x:a.x},d={y:a.y,x:a.x+1},e={y:a.y+1,x:a.x},f={y:a.y,x:a.x-1};return h(c)&&b.push(c),h(d)&&b.push(d),h(e)&&b.push(e),h(f)&&b.push(f),b}function j(a){n[a.y]=n[a.y]||[],n[a.y][a.x]=1}function k(){for(var a,b=m.slice(0),c=0;c<b.length;c+=1)if(!b[c].complete&&(a=l(b[c])))return a}function l(a){var b,d=i(a[a.length-1]),e=!1;m.splice(m.indexOf(a),1);for(var g=0;g<d.length;g+=1){var h=f(d[g],c);if(h&&(e=h),1===d.length){if(a.complete=h,a.push(d[g]),m.push(a),e)return a}else if(b=a.slice(0),b.complete=h,b.push(d[g]),m.push(b),e)return b;j(d[g])}return e}var m=[[b]],n=g();if(h(b)&&h(c))var o=setInterval(function(){for(var a=Date.now();Date.now()===a;){var b=m[0],c=k();!c&&m.length||(clearInterval(o),e(c||b))}},1)}a.findPath=b}),e(),b.mazegen}(this.mazegen||{},function(){return this}());
//# sourceMappingURL=mazegen.min.js.map