/*!
* maze-generator v.0.0.1
* (c) 2016, Obogo
* License: MIT.
*/


!function(a,b){b.mazegen=a;var c,d,e=function(){};return function(){var a,b,f,g,h,i="~",j=".";return a=Function[i]=Function[i]||function(b){return a[b]||(a[b]={}),a[b]},g=a("c"),b=a("d"),f=a("p"),h=function(a){var c=arguments,d=c[1];"function"==typeof d?b[a]=d():(g[a]=c[2],g[a][j]=d)},c=d=function(){h.apply(null,arguments)},resolve=function(a,c){f[a]=!0;var d,e,h,i=c[j],k=[];if(i)for(e=i.length,d=0;e>d;d++)h=i[d],g[h]&&(f.hasOwnProperty(h)||resolve(h,g[h]),resolve(h,g[h]),delete g[h]);if(!b.hasOwnProperty(a)){for(d=0;e>d;d++)h=i[d],k.push(b.hasOwnProperty(h)&&b[h]);b[a]=c.apply(null,k)}delete f[a]},e=function(){for(var a in g)resolve(a,g[a])},c}(),c("mazeGenerator",["dispatcher"],function(b){function c(a,c,h,i,j){function k(a,b){this.x=a,this.y=b}function l(){E=new k(Math.floor(.5*a),Math.floor(.5*c)),m(a,c,h,i,E.x,E.y)}function m(b,d,f,g,j,k){M.length=0,a=b,c=d,h=f,i=g,G=a*c/4,L=!1,I.length=0,t(),E.x=j,E.y=k,F=E.clone(),w(F.y,F.x,e),I=n(F.y,F.x),q()}function n(a,b){for(var c=s(a,b),d=c.length,e=[],f=0;d>f;f+=2){var g=c[f],h=c[f+1],i={source:g,dest:h,inBetween:new k(g.x-.5*(g.x-h.x),g.y-.5*(g.y-h.y))};e.push(i)}return e}function o(){clearTimeout(D)}function p(a){o(),D=setTimeout(q,a||i||500)}function q(b){if(I.length||b){var d=I.splice(Math.floor(Math.random()*I.length),1)[0];d.type=f,I=I.concat(n(F.y,F.x));var i=d.dest;if(!i||H[i.y][i.x]===f||H[i.y][i.x]===e)return void q();F.y===E.y&&F.x===E.x?w(F.y,F.x,e):H[F.y][F.x]===g&&w(F.y,F.x,f),w(d.inBetween.y,d.inBetween.x,f),w(i.y,i.x,g),0===Math.floor(Math.random()*j)&&r(),K+=1,F=i,M.push(d.inBetween),M.push(i),C.fire("render",H,y(),d.inBetween.clone(),i.clone()),I.length<a*c*h?p(10):(L||(L=!0,C.fire("ready",E.clone())),p(0))}}function r(){var b=s(F.y,F.x,1),d=b[Math.floor(Math.random()*b.length)];d&&d.y&&d.x&&d.y<a-1&&d.x<c-1&&w(d.y,d.x,f)}function s(a,b,c){var d=[];return c=c||J,v(a,b-c)||(d.push(new k(b,a)),d.push(new k(b-c,a))),v(a-J,b)||(d.push(new k(b,a)),d.push(new k(b,a-c))),v(a,b+J)||(d.push(new k(b,a)),d.push(new k(b+c,a))),v(a+J,b)||(d.push(new k(b,a)),d.push(new k(b,a+c))),d}function t(){for(var b=0;a>b;b+=1){H[b]=[];for(var e=0;c>e;e+=1)H[b][e]=d}}function u(b,d){return 0>b||0>d||b>=a||d>=c}function v(a,b){return u(a,b)?!0:H[a][b]===f||H[a][b]===e}function w(a,b,c){u(a,b)||(H[a][b]=c)}function x(){return H}function y(){return K/G}function z(a,b){return H[b]&&H[b][a]}function A(a,b,c){var d=[];return z(a,b-1)===c&&d.push(new k(a,b-1)),z(a,b+1)===c&&d.push(new k(a,b+1)),z(a-1,b)===c&&d.push(new k(a-1,b)),z(a+1,b)===c&&d.push(new k(a+1,b)),d}function B(){return M}var C=this;h=h||.1;var D,E,F,G,H=[],I=[],J=2,K=0,L=!1,M=[];return k.prototype.clone=function(){return new k(this.x,this.y)},C.getBoard=x,C.getPercent=y,C.getValue=z,C.setCell=w,C.getAvailablePoints=n,C.getValuesAroundPoint=A,C.stop=o,C.reset=m,C.getAllAvailablePoints=B,b(C),l(),C}var d=0,e=1,f=2,g=3;a.types={WALL:d,START:e,PATH:f,ACTIVE:g},a.create=function(a,b,d,e,f){return new c(a,b,d,e,f)}}),c("dispatcher",["apply","isFunction"],function(a,b){function c(a){this.type=a,this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1}function d(a){if(!a)throw Error("event cannot be undefined")}c.prototype.preventDefault=function(){this.defaultPrevented=!0},c.prototype.stopPropagation=function(){this.propagationStopped=!0},c.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=!0},c.prototype.toString=function(){return this.type};var e=function(e,f,g){function h(a,b){d(a);var c,e;e=o[a],e&&(b?(c=e.indexOf(b),-1!==c&&e.splice(c,1)):e.length=0)}function i(a,c){return b(c)?(d(a),o[a]=o[a]||[],o[a].push(c),function(){h(a,c)}):void 0}function j(c,g){function j(){h(c,j),a(g,f||e,arguments)}return b(g)?(d(c),i(c,j)):void 0}function k(a,b){d(a);var c,e="*";return a||b?(c=[],o[e]&&(c=o[e].concat(c)),o[a]&&(c=o[a].concat(c)),c):o}function l(){o={}}function m(b,c){return b&&a(b,e,c)}function n(a){d(a);var b,e=k(a,!0),f=e.length,a="object"==typeof a?a:new c(a);if(f)for(arguments[0]=a,b=0;f>b;b+=1)a.immediatePropagationStopped||m(e[b],arguments);return a}if(e&&e.on&&e.on.dispatcher)return e;e=e||{};var o={};return i.dispatcher=!0,f&&g?(e.on=f[g.on]&&f[g.on].bind(f),e.off=f[g.off]&&f[g.off].bind(f),e.once=f[g.once]&&f[g.once].bind(f),e.dispatch=e.fire=f[g.dispatch].bind(f)):(e.on=i,e.off=h,e.once=j,e.dispatch=e.fire=n),e.getListeners=k,e.removeAllListeners=l,e};return e}),c("apply",["isFunction"],function(a){return function(b,c,d){if(a(b)){switch(d=d||[],d.length){case 0:return b.call(c);case 1:return b.call(c,d[0]);case 2:return b.call(c,d[0],d[1]);case 3:return b.call(c,d[0],d[1],d[2]);case 4:return b.call(c,d[0],d[1],d[2],d[3]);case 5:return b.call(c,d[0],d[1],d[2],d[3],d[4]);case 6:return b.call(c,d[0],d[1],d[2],d[3],d[4],d[5])}return b.apply(c,d)}}}),c("isFunction",function(){var a=function(a){return"function"==typeof a};return a}),e(),b.mazegen}(this.mazegen||{},function(){return this}());
//# sourceMappingURL=mazegen.min.js.map